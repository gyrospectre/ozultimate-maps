/*!
 Leaflet.TileLayer.Fallback 0.1.1 (c908bda)
 (c) 2015-2016 Boris Seang
 License Apache-2.0
 */
!function(i,e){"function"==typeof define&&define.amd?define(["leaflet"],function(t){return i.L.TileLayer.Fallback=e(t)}):"object"==typeof module&&module.exports?module.exports=e(require("leaflet")):i.L.TileLayer.Fallback=e(i.L)}(this,function(i){var e=i.TileLayer,t=e.prototype,l=e.extend({options:{minNativeZoom:0},initialize:function(i,e){t.initialize.call(this,i,e)},_loadTile:function(i,e){t._loadTile.call(this,i,e),i._originalTilePoint=e,i._originalSrc=i.src},_tileOnError:function(){var e,t,l,o=this._layer,r=this._originalTilePoint,a=this._tilePoint=this._tilePoint||i.extend({},r),n=this._fallbackZoom=(this._fallbackZoom||r.z)-1,s=this._fallbackScale=2*(this._fallbackScale||1),c=o._getTileSize();return n<o.options.minNativeZoom?(o.fire("tileerror",{tile:this,url:this.src}),e=o.options.errorTileUrl,e&&(this.src=e),void o._tileLoaded()):(a.z=n,a.x=Math.floor(a.x/2),a.y=Math.floor(a.y/2),e=o.getTileUrl(a),this.style.width=this.style.height=c*s+"px",t=(r.y-a.y*s)*c,this.style.marginTop=-t+"px",l=(r.x-a.x*s)*c,this.style.marginLeft=-l+"px",this.style.clip="rect("+t+"px "+(l+c)+"px "+(t+c)+"px "+l+"px)",o.fire("tilefallback",{tile:this,url:this._originalSrc,urlMissing:this.src,urlFallback:e}),void(this.src=e))},_resetTile:function(i){var e=this._getTileSize()+"px";delete i._originalTilePoint,delete i._fallbackZoom,delete i._fallbackScale,i.style={width:e,height:e}}});return i.tileLayer.fallback=function(i,e){return new l(i,e)},l});